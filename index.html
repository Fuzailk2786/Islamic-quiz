<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Islamic Questz - 2026</title>
    <link rel="manifest" href="manifest.json">
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@700&family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    <script src="https://www.gstatic.com/firebasejs/9.17.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.17.1/firebase-database-compat.js"></script>

<script>
  const firebaseConfig = {
    apiKey: "AIzaSyD6v6BFkqUmgfJWGIm1eMEEOQX7wnWkq8k",
    authDomain: "islamicquestz.firebaseapp.com",
    databaseURL: "https://islamicquestz-default-rtdb.firebaseio.com",
    projectId: "islamicquestz",
    storageBucket: "islamicquestz.firebasestorage.app",
    appId: "1:740000996250:web:444a3b4ba9c92dad64b823",
    messagingSenderId: "740000996250",
    measurementId: "G-YSH95XR38D"
  };

  // Initialize Firebase
  firebase.initializeApp(firebaseConfig);
  const db = firebase.database();
</script>
    <style>
        :root {
            --bg-color: #f8fafc; --card-bg: #ffffff; --text-main: #064e3b;
            --emerald: #065f46; --gold: #b45309; --soft-gold: #fef3c7;
            --border: #e2e8f0; --shadow: rgba(0,0,0,0.1);
        }
        [data-theme="dark"] {
            --bg-color: #0f172a; --card-bg: #1e293b; --text-main: #f1f5f9;
            --emerald: #10b981; --gold: #fbbf24; --soft-gold: #334155;
            --border: #334155; --shadow: rgba(0,0,0,0.4);
        }

        body { font-family: 'Poppins', sans-serif; background: var(--bg-color); margin: 0; color: var(--text-main); transition: 0.3s; overflow-x: hidden; }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        
        #bismillah-overlay {
            position: fixed; inset: 0; background: #064e3b;
            display: flex; flex-direction: column; justify-content: center;
            align-items: center; z-index: 10000; transition: 1s;
            pointer-events: none; user-select: none;
        }
        .bismillah-text { color: #fbbf24; font-size: 2rem; margin-bottom: 20px; font-family: 'Cinzel'; opacity: 0; animation: fadeIn 2s forwards; }

        #sidebar {
            position: fixed; right: -280px; top: 0; width: 280px; height: 100%;
            background: var(--card-bg); z-index: 2000; transition: 0.3s;
            box-shadow: -5px 0 15px var(--shadow); padding-top: 20px;
        }
        #sidebar.open { right: 0; }
        .profile-section { padding: 20px; text-align: center; border-bottom: 2px solid var(--gold); }
        .avatar { width: 80px; height: 80px; border-radius: 50%; background: var(--soft-gold); margin: 0 auto 10px; display: flex; align-items: center; justify-content: center; font-size: 2rem; border: 2px solid var(--gold); position: relative; cursor: pointer; overflow: hidden; }
        #profile-img { width: 100%; height: 100%; object-fit: cover; border-radius: 50%; display: none; }

        .nav-item { padding: 12px 25px; display: flex; align-items: center; gap: 10px; color: var(--text-main); text-decoration: none; cursor: pointer; border-bottom: 1px solid var(--border); }
        .nav-item:hover { background: var(--soft-gold); }

        .mode-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 20px; }
        .main-btn { background: var(--card-bg); border: 1px solid var(--border); padding: 15px; border-radius: 15px; cursor: pointer; transition: 0.2s; font-weight: 600; color: var(--text-main); }
        .main-btn:hover { border-color: var(--gold); transform: translateY(-2px); }

        .level-grid { display: grid; grid-template-columns: repeat(5, 1fr); gap: 10px; margin: 20px 0; }
        .lvl { padding: 15px 5px; border-radius: 12px; border: 2px solid var(--emerald); background: none; color: var(--text-main); font-weight: bold; cursor: pointer; }
        .lvl.locked { opacity: 0.3; background: #eee; cursor: not-allowed; }
        .lvl.completed { background: var(--emerald) !important; color: white !important; }

        .dua-card { background: var(--card-bg); border-left: 5px solid var(--gold); padding: 15px; margin: 10px 0; border-radius: 10px; box-shadow: 0 2px 5px var(--shadow); text-align: right; }
        
        .hidden { display: none !important; }
        #menu-btn { position: fixed; top: 15px; right: 15px; font-size: 1.5rem; z-index: 2001; cursor: pointer; background: var(--gold); color: white; border: none; border-radius: 8px; width: 40px; height: 40px; }
        .back-btn { background: none; border: none; color: var(--gold); font-weight: bold; cursor: pointer; margin-bottom: 15px; font-size: 1rem; }
    </style>
</head>
<body>

    <div id="bismillah-overlay">
        <div class="bismillah-text">ÿ®Ÿêÿ≥ŸíŸÖŸê Ÿ±ŸÑŸÑŸéŸëŸ∞ŸáŸê Ÿ±ŸÑÿ±ŸéŸëÿ≠ŸíŸÖŸéŸ∞ŸÜŸê Ÿ±ŸÑÿ±ŸéŸëÿ≠ŸêŸäŸÖŸê</div>
        <div style="color: white; letter-spacing: 2px;">ISLAMIC QUESTZ</div>
    </div>

    <div id="app-modal" class="hidden" style="position: fixed; inset: 0; background: rgba(0,0,0,0.7); z-index: 10000; display: flex; align-items: center; justify-content: center; padding: 20px;">
        <div style="background: var(--card-bg); width: 100%; max-width: 400px; border-radius: 20px; padding: 25px; text-align: center; border: 2px solid var(--gold); box-shadow: 0 10px 25px rgba(0,0,0,0.5);">
            <div id="modal-icon" style="font-size: 3rem; margin-bottom: 10px;"></div>
            <h3 id="modal-title" style="font-family: 'Cinzel'; margin-top: 0; color: var(--emerald);"></h3>
            <p id="modal-message" style="margin-bottom: 25px; line-height: 1.5; color: var(--text-main);"></p>
            <button id="modal-btn" class="main-btn" style="width: 100%; background: var(--emerald); color: white; border: none;">Continue</button>
        </div>
    </div>

    <button id="menu-btn" class="hidden" onclick="toggleMenu()">‚ò∞</button>
    
    <nav id="sidebar">
        <div class="profile-section">
            <div id="review-link" class="nav-item hidden" onclick="showReview()">üìö Review All Answers</div>
            <div class="avatar" onclick="document.getElementById('upload-pic').click()">
                <span id="avatar-init">?</span>
                <img id="profile-img" src="" alt="Profile">
            </div>
            <input type="file" id="upload-pic" class="hidden" accept="image/*" onchange="uploadImage(this)">
            <div id="user-display-name" style="font-weight: 600; margin-top: 5px;">Guest User</div>
        </div>
        <div class="nav-item" onclick="showScreen('home')">üè† Home</div>
        <div class="nav-item" onclick="showScreen('ramadan-grid')">üåô Ramadan Quiz</div>
        <div class="nav-item" onclick="showScreen('regular-grid')">üìñ Learning</div>
        <div class="nav-item" onclick="showHadith()">üìú Hadith of Day</div>
        <div class="nav-item" onclick="showDuas()">ü§≤ Daily Duas</div>
        <div class="nav-item" onclick="showScreen('feedback')">üí° Feedback</div>
        <div class="nav-item" onclick="shareApp()">üì§ Invite Friends</div>
        <div class="nav-item" onclick="toggleTheme()">üåì Theme Mode</div>
    </nav>

    <div id="main-container" class="hidden">
        <div class="app-card" style="margin: 0 auto; max-width: 500px; padding: 20px;">
            
            <div id="screen-auth">
                <h2 style="font-family: 'Cinzel'; text-align:center;">Welcome</h2>
                <div id="login-box" style="text-align:center;">
                    <input type="email" id="auth-email" class="auth-input" placeholder="Enter Email" style="width: 80%; padding: 12px; margin-bottom: 10px; border-radius: 10px; border: 1px solid var(--border);">
                    <button class="main-btn" style="width: 85%; background: var(--emerald); color: white;" onclick="handleAuth('register')">Register & Login</button>
                    <div style="margin: 15px 0;">OR</div>
                    <button class="main-btn" style="width: 85%; background: var(--gold); color: white;" onclick="handleAuth('guest')">Continue as Guest</button>
                </div>
            </div>

            <div id="screen-home" class="hidden">
                <h1 style="font-family: 'Cinzel'; text-align:center;">Islamic Questz</h1>
                <div class="mode-grid">
                    <div class="main-btn" onclick="showScreen('ramadan-grid')">üåô<br>Ramadan Quiz</div>
                    <div class="main-btn" onclick="showScreen('regular-grid')">üìñ<br>Learning</div>
                    <div class="main-btn" onclick="showHadith()">üìú<br>Daily Hadith</div>
                    <div class="main-btn" onclick="showDuas()">ü§≤<br>Daily Duas</div>
                </div>
                <button id="install-btn" class="main-btn" style="width: 100%; margin-top: 20px; background: #3b82f6; color: white;">üì≤ Install App</button>
            </div>

            <div id="screen-content" class="hidden">
                <button class="back-btn" onclick="showScreen('home')">‚Üê Back</button>
                <div id="dynamic-body"></div>
            </div>

        </div>
    </div>

    <script src="questions.js"></script>

    <script>
        const DUA_DB = [
            { t: "Before Eating", a: "ÿ®Ÿêÿ≥ŸíŸÖŸê ÿßŸÑŸÑŸéŸëŸáŸê", tr: "In the name of Allah" },
            { t: "After Eating", a: "ÿßŸÑŸíÿ≠ŸéŸÖŸíÿØŸè ŸÑŸêŸÑŸéŸëŸáŸê ÿßŸÑŸéŸëÿ∞ŸêŸä ÿ£Ÿéÿ∑ŸíÿπŸéŸÖŸéŸÜŸéÿß", tr: "Praise be to Allah who fed us" },
            { t: "Before Sleeping", a: "ÿ®Ÿêÿßÿ≥ŸíŸÖŸêŸÉŸé ÿßŸÑŸÑŸéŸëŸáŸèŸÖŸéŸë ÿ£ŸéŸÖŸèŸàÿ™Ÿè ŸàŸéÿ£Ÿéÿ≠ŸíŸäŸéÿß", tr: "In Your name O Allah I die and live" }
        ];

        const HADITH_LIST = [
            "The best among you are those who learn the Quran and teach it.",
            "Cleanliness is half of faith.",
            "A good word is a charity.",
            "He who does not show mercy to others will not be shown mercy."
        ];

        // --- CUSTOM MODAL POPUP ENGINE ---
        function showPopup(title, message, icon, callback) {
            const modal = document.getElementById('app-modal');
            document.getElementById('modal-title').innerText = title;
            document.getElementById('modal-message').innerText = message;
            document.getElementById('modal-icon').innerText = icon;
            
            modal.classList.remove('hidden');
            
            document.getElementById('modal-btn').onclick = () => {
                modal.classList.add('hidden');
                if (callback) callback();
            };
        }
        function updateCountdown(targetDate) {
    const timerDisplay = document.getElementById('countdown-clock');
    
    const interval = setInterval(() => {
        const now = new Date().getTime();
        const distance = targetDate - now;
        
        if (distance < 0) {
            clearInterval(interval);
            timerDisplay.innerText = "New Day Unlocked!";
            renderRamadanGrid(); // Refresh grid to unlock the new button
            return;
        }
        
        const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
        const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
        const seconds = Math.floor((distance % (1000 * 60)) / 1000);
        
        timerDisplay.innerText = 
            (hours < 10 ? "0" + hours : hours) + ":" + 
            (minutes < 10 ? "0" + minutes : minutes) + ":" + 
            (seconds < 10 ? "0" + seconds : seconds);
    }, 1000);
}
        function startTimer(targetDate) {
    function updateClock() {
        const now = new Date().getTime();
        const distance = targetDate - now;

        if (distance < 0) {
            clearInterval(timerInterval);
            renderRamadanGrid(); // Auto-unlock the next day when timer hits zero
            return;
        }

        const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
        const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
        const seconds = Math.floor((distance % (1000 * 60)) / 1000);

        const clockElement = document.getElementById('countdown-clock');
        if (clockElement) {
            clockElement.innerText = 
                (hours < 10 ? "0" + hours : hours) + ":" + 
                (minutes < 10 ? "0" + minutes : minutes) + ":" + 
                (seconds < 10 ? "0" + seconds : seconds);
        }
    }

    const timerInterval = setInterval(updateClock, 1000);
    updateClock(); // Run once immediately
}

        window.addEventListener('load', () => {
            setTimeout(() => {
                const overlay = document.getElementById('bismillah-overlay');
                const main = document.getElementById('main-container');
                if (overlay) {
                    overlay.style.opacity = '0';
                    overlay.style.pointerEvents = 'none'; 
                    setTimeout(() => {
                        overlay.classList.add('hidden');
                        if (main) main.classList.remove('hidden');
                        checkExistingLogin();
                    }, 800);
                }
            }, 2500);
        });

        function handleAuth(type) {
            let user = { name: "", avatar: "" };
            if(type === 'guest') {
                user.name = "Guest_" + Math.floor(Math.random() * 9000);
            } else {
                const val = document.getElementById('auth-email').value;
                if(!val.includes('@')) {
                    showPopup("Input Error", "A valid email is required to register.", "üìß");
                    return;
                }
                user.name = val.split('@')[0];
            }
            localStorage.setItem('iq_user', JSON.stringify(user));
            loginUser(user);
        }

        function loginUser(user) {
            document.getElementById('screen-auth').classList.add('hidden');
            document.getElementById('screen-home').classList.remove('hidden');
            document.getElementById('menu-btn').classList.remove('hidden');
            document.getElementById('user-display-name').innerText = user.name;
            document.getElementById('avatar-init').innerText = user.name[0].toUpperCase();
        }

        function checkExistingLogin() {
            const saved = localStorage.getItem('iq_user');
            if(saved) {
                loginUser(JSON.parse(saved));
                updateSidebarLinks();
            }
        }

        function toggleMenu() { document.getElementById('sidebar').classList.toggle('open'); }

        function showScreen(id) {
            const screens = ['screen-auth', 'screen-home', 'screen-content'];
            screens.forEach(s => document.getElementById(s).classList.add('hidden'));
            
            if(id === 'ramadan-grid') {
                renderRamadanGrid();
                document.getElementById('screen-content').classList.remove('hidden');
            } else if (id === 'regular-grid') {
                document.getElementById('screen-content').classList.remove('hidden');
                document.getElementById('dynamic-body').innerHTML = "<h2>Learning Pathways</h2><p>Coming Soon!</p>";
            } else {
                document.getElementById('screen-' + id).classList.remove('hidden');
            }
            if(document.getElementById('sidebar').classList.contains('open')) toggleMenu();
        }

        function renderRamadanGrid() {
    const container = document.getElementById('dynamic-body');
    
    // Ramadan 2026 Start Date (Adjust if official moon sighting varies)
    const ramadanStart = new Date('2026-02-18T00:00:00'); 
    const now = new Date();
    
    // Calculate current day of Ramadan
    const diffInMs = now - ramadanStart;
    const currentDay = Math.floor(diffInMs / (1000 * 60 * 60 * 24)) + 1;
    
    // Calculate when the next day starts (Midnight)
    const nextUnlock = new Date(now);
    nextUnlock.setHours(24, 0, 0, 0); 

    container.innerHTML = `
        <div id="timer-banner" style="background:var(--soft-gold); padding:15px; border-radius:15px; margin-bottom:20px; text-align:center; border:1px solid var(--gold); border-left:5px solid var(--gold);">
            <small style="color:var(--gold); font-weight:600; text-transform:uppercase; letter-spacing:1px;">Next Level Unlocks In / Agla Level Khulega:</small>
            <div id="countdown-clock" style="font-family:'Cinzel'; font-size:1.8rem; color:var(--emerald); margin-top:5px;">00:00:00</div>
        </div>
        <h2 style="font-family:'Cinzel'; text-align:center;">Ramadan Challenge 2026</h2>
        <div class="level-grid" id="grid"></div>
    `;

    // Initialize the ticking timer
    startTimer(nextUnlock);

    // Build the grid
    for(let i=1; i<=31; i++) {
        const btn = document.createElement('button');
        btn.className = 'lvl';
        btn.innerText = i === 31 ? "EID" : i;
        
        // Lock logic: If the day hasn't arrived yet
        if(i > currentDay && i !== 31) { 
            btn.classList.add('locked');
            btn.onclick = () => showPopup("Locked / Band Hai", `This challenge unlocks on Day ${i}.\n(Yeh challenge Day ${i} ko khulega.)`, "üîí");
        } else {
            if(localStorage.getItem('lvl_'+i)) btn.classList.add('completed');
            btn.onclick = () => i === 31 ? startEidQuiz() : startRamadanLevel(i);
        }
        document.getElementById('grid').appendChild(btn);
    }
}
        function startRamadanLevel(levelNum) {
            if (typeof window.RAMADAN_QUESTIONS === 'undefined') {
                return showPopup("Loading", "Questions are still loading, please wait.", "‚è≥");
            }
            const questions = window.RAMADAN_QUESTIONS[`level${levelNum}`];
            if (!questions) return showPopup("Coming Soon", "Content for this day is being prepared.", "üìÖ");

            const body = document.getElementById('dynamic-body');
            body.innerHTML = `<h3 id="quiz-title">Day ${levelNum}</h3><div id="quiz-area"></div>`;
            loadQuestion(levelNum, 0);
        }

        function loadQuestion(level, index) {
    const qData = window.RAMADAN_QUESTIONS[`level${level}`][index];
    const area = document.getElementById('quiz-area');
    if (!qData) return;

    area.innerHTML = `
        <p style="color:var(--gold); font-weight:600;">Question ${index + 1} of ${window.RAMADAN_QUESTIONS[`level${level}`].length}</p>
        <div style="margin-bottom:20px;">
            <h4 style="margin-bottom:5px; line-height:1.4;">${qData.q}</h4>
            <p style="margin:0; font-style:italic; color:var(--emerald); font-size:0.95rem; opacity:0.9;">${qData.qh || ""}</p>
        </div>
        <div id="options-box"></div>
    `;

    qData.o.forEach((opt, i) => {
        const b = document.createElement('button');
        b.className = 'main-btn';
        b.style.width = "100%";
        b.style.marginBottom = "10px";
        b.style.textAlign = "left";
        
        // Combine English and Hinglish options
        const hinglishOpt = (qData.oh && qData.oh[i]) ? `<br><span style="font-size:0.85rem; font-weight:normal; opacity:0.8;">${qData.oh[i]}</span>` : "";
        b.innerHTML = `<strong>${opt}</strong>${hinglishOpt}`;
        
        b.onclick = (e) => {
            e.preventDefault();
            checkAnswer(level, index, opt);
        };
        document.getElementById('options-box').appendChild(b);
    });
}

       function checkAnswer(level, index, selected) {
    const qData = window.RAMADAN_QUESTIONS[`level${level}`][index];
    
    if (selected.trim() === qData.a.trim()) {
        // Show English explanation followed by Hinglish
        const fullExplanation = qData.e + (qData.eh ? `\n\n(${qData.eh})` : "");
        
        showPopup("Correct! ‚ú®", fullExplanation, "üåô", () => {
            const nextIndex = index + 1;
            if (nextIndex < window.RAMADAN_QUESTIONS[`level${level}`].length) {
                loadQuestion(level, nextIndex);
            } else {
                localStorage.setItem(`lvl_${level}`, 'true');
                if (level === 31) {
                    showPopup("MABROOK!", "Finale Completed! / Finale Poora Hua!", "üèÜ", () => showCertificate());
                } else {
                    showPopup("Day Completed!", `Day ${level} finished. / Din ${level} poora hua.`, "‚≠ê", () => renderRamadanGrid());
                }
                updateSidebarLinks();
            }
        });
    } else {
        showPopup("Try Again", "Incorrect answer. / Galat jawab. Dobara sochein! ü§î", "‚ùå");
    }
}

        function showDuas() {
            showScreen('content');
            const body = document.getElementById('dynamic-body');
            body.innerHTML = '<h2>Daily Duas</h2>';
            DUA_DB.forEach(d => {
                body.innerHTML += `<div class="dua-card"><strong>${d.t}</strong><br><span>${d.a}</span><br><small>${d.tr}</small></div>`;
            });
        }

        function showHadith() {
            showScreen('content');
            const dayIdx = new Date().getDate() % HADITH_LIST.length;
            document.getElementById('dynamic-body').innerHTML = `<h2>Hadith</h2><div class="dua-card" style="text-align:center;">"${HADITH_LIST[dayIdx]}"</div>`;
        }

        function startEidQuiz() {
            if (!localStorage.getItem('lvl_30')) {
                showPopup("Grand Finale Locked", "Please complete all 30 days of Ramadan first.", "üîí", () => showScreen('ramadan-grid'));
                return;
            }
            showPopup("Grand Finale", "Answer all 10 questions correctly to earn your certificate.", "üåü", () => startRamadanLevel(31));
        }

        function showCertificate() {
            const isCompleted = localStorage.getItem('lvl_31');
            if (!isCompleted) {
                const body = document.getElementById('dynamic-body');
                body.innerHTML = `<div style="text-align:center; padding:40px;"><div style="font-size:50px;">üîí</div><h3>Certificate Locked</h3><button class="main-btn" onclick="showScreen('ramadan-grid')">Go to Quiz</button></div>`;
                showScreen('content');
                return;
            }
            const user = JSON.parse(localStorage.getItem('iq_user')) || { name: "Valued Learner" };
            const date = new Date().toLocaleDateString('en-GB', { day: 'numeric', month: 'long', year: 'numeric' });
            const body = document.getElementById('dynamic-body');
            body.innerHTML = `
                <div id="certificate-print-area" style="border:15px double var(--gold); padding:30px; text-align:center; background:white; color:#064e3b; position:relative; font-family:'Cinzel', serif;">
                    <div style="border:2px solid var(--emerald); padding:20px;">
                        <h1 style="margin:0; font-size:2.5rem;">CERTIFICATE</h1>
                        <p style="letter-spacing:3px;">OF COMPLETION</p>
                        <hr style="width:50%; border:1px solid var(--gold);">
                        <p>This is to certify that</p>
                        <h2 style="font-size:2rem; text-decoration:underline; margin:10px 0;">${user.name}</h2>
                        <p>has successfully completed the</p>
                        <h3 style="color:var(--emerald)">30-DAY RAMADAN QUEST 2026</h3>
                        <p>Demonstrating excellent knowledge of Islamic history, <br>Quranic studies, and Ramadan traditions.</p>
                        <div style="margin-top:30px; display:flex; justify-content:space-between; align-items:flex-end;">
                            <div style="text-align:left;"><small>Date: ${date}</small></div>
                            <div style="text-align:right;"><img src="https://img.icons8.com/fluency/64/verified-badge.png" width="40"><br><small>Islamic Questz Certified</small></div>
                        </div>
                    </div>
                </div>
                <button class="main-btn" style="width:100%; margin-top:20px; background:var(--emerald); color:white;" onclick="printCertificate()">üì• Download / Save PDF</button>
            `;
            showScreen('content');
        }

        function printCertificate() {
            const printContent = document.getElementById('certificate-print-area').innerHTML;
            const originalContent = document.body.innerHTML;
            document.body.innerHTML = printContent;
            window.print();
            document.body.innerHTML = originalContent;
            window.location.reload();
        }

        function uploadImage(input) {
            if (input.files && input.files[0]) {
                const reader = new FileReader();
                reader.onload = (e) => {
                    document.getElementById('profile-img').src = e.target.result;
                    document.getElementById('profile-img').style.display = 'block';
                    document.getElementById('avatar-init').style.display = 'none';
                };
                reader.readAsDataURL(input.files[0]);
            }
        }

        function toggleTheme() {
            const t = document.body.getAttribute('data-theme') === 'dark' ? 'light' : 'dark';
            document.body.setAttribute('data-theme', t);
        }

        function shareApp() { if(navigator.share) navigator.share({title:'Islamic Questz', url: location.href}); }

        function showReview() {
            showScreen('content');
            const body = document.getElementById('dynamic-body');
            if (typeof window.RAMADAN_QUESTIONS === 'undefined') return showPopup("Error", "Data not loaded.", "‚ùå");

            let html = '<h2>Knowledge Review</h2><p>Correct answers from your journey:</p>';
            for (let i = 1; i <= 30; i++) {
                const level = window.RAMADAN_QUESTIONS[`level${i}`];
                if(!level) continue;
                html += `<details style="margin-bottom:10px; padding:10px; background:var(--soft-gold); border-radius:8px; color: #000;">
                            <summary style="font-weight:600; cursor:pointer;">Day ${i} Questions</summary>`;
                level.forEach(q => {
                    html += `<p style="border-left:3px solid var(--emerald); padding-left:10px; margin-top:10px;">
                                <strong>Q: ${q.q}</strong><br>
                                <span style="color:green;">Ans: ${q.a}</span><br>
                                <small style="color: #666;">${q.e || ""}</small>
                             </p>`;
                });
                html += `</details>`;
            }
            body.innerHTML = html;
        }

        function updateSidebarLinks() {
            if (localStorage.getItem('lvl_31')) {
                document.getElementById('review-link').classList.remove('hidden');
            }
        }
    </script>
</body>
</html>
