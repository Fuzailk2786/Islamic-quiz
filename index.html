<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Islamic Questz - 2026</title>
    <link rel="manifest" href="manifest.json">
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@700&family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-color: #f8fafc; --card-bg: #ffffff; --text-main: #064e3b;
            --emerald: #065f46; --gold: #b45309; --soft-gold: #fef3c7;
            --border: #e2e8f0; --shadow: rgba(0,0,0,0.1);
            --whatsapp: #25D366; --blue: #1e40af;
        }
        [data-theme="dark"] {
            --bg-color: #0f172a; --card-bg: #1e293b; --text-main: #f1f5f9;
            --emerald: #10b981; --gold: #fbbf24; --soft-gold: #334155;
            --border: #334155; --shadow: rgba(0,0,0,0.4);
        }

        body { font-family: 'Poppins', sans-serif; background: var(--bg-color); margin: 0; overflow-x: hidden; color: var(--text-main); transition: 0.3s; }

        /* Bismillah Overlay */
        #bismillah-overlay {
            position: fixed; inset: 0; background: #064e3b;
            display: flex; flex-direction: column; justify-content: center;
            align-items: center; z-index: 10000; transition: opacity 0.8s ease;
        }
        #start-trigger {
            padding: 15px 35px; background: #fbbf24; color: #064e3b;
            border: none; border-radius: 50px; font-weight: 700; cursor: pointer;
            font-size: 1.1rem; box-shadow: 0 10px 20px rgba(0,0,0,0.2);
        }

        /* Sidebar Navigation */
        #sidebar {
            position: fixed; left: -280px; top: 0; width: 280px; height: 100%;
            background: var(--card-bg); z-index: 2000; transition: 0.3s;
            box-shadow: 5px 0 15px var(--shadow); padding-top: 60px;
        }
        #sidebar.open { left: 0; }
        .nav-item {
            padding: 15px 25px; display: block; color: var(--text-main);
            text-decoration: none; font-weight: 500; border-bottom: 1px solid var(--border);
            cursor: pointer; transition: 0.2s;
        }
        .nav-item:hover { background: var(--soft-gold); }
        #menu-btn { position: fixed; top: 15px; left: 15px; font-size: 1.8rem; z-index: 2001; cursor: pointer; background: none; border: none; color: var(--text-main); }
        #overlay { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.5); z-index: 1999; }

        /* Main Container */
        #main-container { padding: 80px 20px 20px; display: flex; justify-content: center; min-height: 80vh; }
        .app-card { background: var(--card-bg); width: 100%; max-width: 500px; padding: 1.5rem; border-radius: 24px; box-shadow: 0 10px 30px var(--shadow); text-align: center; position: relative; }

        /* Mode Selection Buttons */
        .mode-btn { width: 100%; padding: 25px; margin-bottom: 15px; border-radius: 20px; color: white; border: none; cursor: pointer; text-align: left; position: relative; overflow: hidden; }
        .ramadan-btn { background: linear-gradient(135deg, #065f46, #064e3b); border: 2px solid var(--gold); }
        .regular-btn { background: linear-gradient(135deg, #1e3a8a, #1e40af); }

        /* Level Grids */
        .level-grid { display: grid; grid-template-columns: repeat(5, 1fr); gap: 10px; margin: 20px 0; }
        .lvl { padding: 12px 5px; border-radius: 12px; border: 2px solid var(--emerald); background: none; color: var(--text-main); font-weight: 600; cursor: pointer; }
        .lvl.locked { opacity: 0.3; cursor: not-allowed; }
        .lvl.completed { background: var(--emerald); color: white; }

        /* Quiz UI */
        .opt-btn { width: 100%; padding: 14px; margin: 8px 0; border-radius: 12px; border: 1px solid var(--border); background: var(--card-bg); color: var(--text-main); cursor: pointer; font-weight: 500; text-align: left; }
        .opt-btn:hover { background: var(--soft-gold); }
        .back-btn { background: none; border: none; color: var(--gold); font-weight: bold; cursor: pointer; margin-bottom: 10px; display: block; }

        /* Modals */
        .modal-overlay { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.8); justify-content: center; align-items: center; z-index: 5000; }
        .modal { background: var(--card-bg); padding: 2rem; border-radius: 24px; width: 90%; max-width: 400px; text-align: center; }
        .auth-btn { width: 100%; padding: 12px; margin: 5px 0; border-radius: 10px; border: none; font-weight: 600; cursor: pointer; }
        .btn-primary { background: var(--emerald); color: white; }
        .btn-secondary { background: var(--gold); color: white; }
        .btn-guest { background: var(--border); color: var(--text-main); }

        .hidden { display: none; }
        #install-btn { width: 100%; padding: 12px; background: #3b82f6; color: white; border: none; border-radius: 12px; font-weight: bold; margin-top: 20px; display: none; }
    </style>
</head>
<body>

    <div id="bismillah-overlay">
        <button id="start-trigger">Open Islamic Questz</button>
        <div class="bismillah-text" id="b-text">ÿ®Ÿêÿ≥ŸíŸÖŸê Ÿ±ŸÑŸÑŸéŸëŸ∞ŸáŸê Ÿ±ŸÑÿ±ŸéŸëÿ≠ŸíŸÖŸéŸ∞ŸÜŸê Ÿ±ŸÑÿ±ŸéŸëÿ≠ŸêŸäŸÖŸê</div>
    </div>

    <button id="menu-btn" onclick="toggleMenu()">‚ò∞</button>
    <div id="overlay" onclick="toggleMenu()"></div>

    <nav id="sidebar">
        <div class="nav-item" onclick="showScreen('home')">üè† HOME</div>
        <div class="nav-item" onclick="switchMode('ramadan')">üåô Ramadan Quiz</div>
        <div class="nav-item" onclick="switchMode('regular')">üìñ Knowledge Pathways</div>
        <div class="nav-item" onclick="switchMode('regular', 'Hadith')">üìú Hadith</div>
        <div class="nav-item" onclick="showScreen('feedback')">üí° Feedback</div>
        <div class="nav-item" onclick="showScreen('privacy')">üîí Privacy Policy</div>
        <div class="nav-item" onclick="toggleTheme()">üåì Toggle Dark Mode</div>
    </nav>

    <div id="main-container">
        <div class="app-card">
            
            <!-- Home Screen -->
            <div id="screen-home">
                <h1 style="font-family: 'Cinzel', serif; font-size: 2rem;">Islamic Questz</h1>
                <div class="mode-btn ramadan-btn" onclick="switchMode('ramadan')">
                    <h3 style="margin:0">Ramadan 30-Day Challenge</h3>
                    <p style="font-size: 0.8rem; opacity: 0.9;">150 Questions ‚Ä¢ Daily Unlocks</p>
                </div>
                <div class="mode-btn regular-btn" onclick="switchMode('regular')">
                    <h3 style="margin:0">Knowledge Pathways</h3>
                    <p style="font-size: 0.8rem; opacity: 0.9;">Quran, History, Sahaba & Hadith</p>
                </div>
                <button id="install-btn">üì≤ Install App for Offline Access</button>
            </div>

            <!-- Ramadan Grid -->
            <div id="screen-ramadan-grid" class="hidden">
                <button class="back-btn" onclick="showScreen('home')">‚Üê Back</button>
                <h2>Ramadan Challenge</h2>
                <div class="level-grid" id="ramadan-grid-container"></div>
            </div>

            <!-- Regular Categories -->
            <div id="screen-regular-grid" class="hidden">
                <button class="back-btn" onclick="showScreen('home')">‚Üê Back</button>
                <h2>Knowledge Pathways</h2>
                <div class="level-grid" id="regular-grid-container">
                    <button class="mode-btn regular-btn" onclick="startQuiz('regular', 'Quran')">Al-Quran</button>
                    <button class="mode-btn regular-btn" onclick="startQuiz('regular', 'History')">History</button>
                    <button class="mode-btn regular-btn" onclick="startQuiz('regular', 'Sahaba')">Sahaba</button>
                    <button class="mode-btn regular-btn" onclick="startQuiz('regular', 'Hadith')">Hadith</button>
                </div>
            </div>

            <!-- Quiz Play -->
            <div id="screen-quiz" class="hidden">
                <button class="back-btn" onclick="goBackFromQuiz()">‚Üê Quit Quiz</button>
                <p id="q-meta" style="color: var(--gold); font-weight: bold; font-size: 0.8rem;"></p>
                <h3 id="q-text"></h3>
                <div id="opt-container"></div>
            </div>

            <!-- Feedback -->
            <div id="screen-feedback" class="hidden">
                <button class="back-btn" onclick="showScreen('home')">‚Üê Back</button>
                <h2>Feedback</h2>
                <textarea id="feedback-input" style="width:100%; border:1px solid var(--border); padding:10px; border-radius:10px;" rows="5" placeholder="Your suggestions..."></textarea>
                <button class="auth-btn btn-primary" onclick="alert('Thank you for your feedback!')">Submit</button>
            </div>

            <!-- Privacy -->
            <div id="screen-privacy" class="hidden">
                <button class="back-btn" onclick="showScreen('home')">‚Üê Back</button>
                <h2>Privacy Policy</h2>
                <div style="text-align: left; font-size: 0.8rem; line-height: 1.6;">
                    <p>We value your privacy. Your progress is saved locally on your device unless you choose to login. We do not sell your data.</p>
                </div>
            </div>

        </div>
    </div>

    <!-- Login/Progress Modal -->
    <div id="modal-auth" class="modal-overlay">
        <div class="modal">
            <h2 style="color: var(--gold)">Level Complete! üåô</h2>
            <p>Save your progress across devices or continue as a guest.</p>
            <button class="auth-btn btn-primary" onclick="closeAuthModal()">Login to Save</button>
            <button class="auth-btn btn-secondary" onclick="closeAuthModal()">Create Account</button>
            <button class="auth-btn btn-guest" onclick="closeAuthModal()">Continue as Guest</button>
        </div>
    </div>

    <!-- Explanation Modal -->
    <div id="modal-explain" class="modal-overlay">
        <div class="modal" style="max-height: 80vh; overflow-y: auto;">
            <h3 id="m-status"></h3>
            <p id="m-ans" style="font-weight: bold; color: var(--emerald)"></p>
            <div id="m-deep-dive" style="background: var(--soft-gold); padding: 15px; border-radius: 12px; font-size: 0.9rem; text-align: left; margin: 15px 0;"></div>
            <button class="auth-btn btn-primary" onclick="nextQuestion()">Next</button>
        </div>
    </div>

    <script>
        // --- DATA ENGINE (Sample of the 450 total) ---
        const db = {
            ramadan: [
    // 1-10: Fundamentals
    { q: "Which is the Holy Month in Islam?", o: ["A) Ramadan", "B) Rajab", "C) Shaban", "D) Muharram"], a: "A) Ramadan", e: "Ramadan is the ninth month of the Islamic lunar calendar, dedicated to fasting and spiritual growth." },
    { q: "The Quran affirms its revelation in which month?", o: ["A) Ramadan", "B) Dhul Hijjah", "C) Shawwal", "D) Safar"], a: "A) Ramadan", e: "Surah Al-Baqarah (2:185) states: 'The month of Ramadan is that in which was revealed the Quran'." },
    { q: "What is the primary goal of fasting according to Quran 2:183?", o: ["A) Health", "B) Taqwa", "C) Poverty awareness", "D) Discipline"], a: "B) Taqwa", e: "The Quran states fasting is prescribed so that you may achieve Taqwa (God-consciousness)." },
    { q: "How many days are in a typical Ramadan month?", o: ["A) 28", "B) 29 or 30", "C) 31", "D) 30 always"], a: "B) 29 or 30", e: "Islamic months are lunar; they depend on the sighting of the new crescent moon." },
    { q: "Which pillar of Islam is Sawm (Fasting)?", o: ["A) 1st", "B) 2nd", "C) 4th", "D) 5th"], a: "C) 4th", e: "Fasting during Ramadan is the 4th pillar, following Shahada, Salah, and Zakat." },
    { q: "What is the pre-dawn meal called?", o: ["A) Iftar", "B) Suhoor", "C) Walima", "D) Aqiqah"], a: "B) Suhoor", e: "Suhoor is the blessed meal taken before Fajr to provide energy for the day's fast." },
    { q: "What is the meal to break the fast at sunset?", o: ["A) Iftar", "B) Suhoor", "C) Brunch", "D) Dinner"], a: "A) Iftar", e: "Iftar is the meal eaten immediately after the Maghrib call to prayer." },
    { q: "Which door of Jannah is reserved for those who fast?", o: ["A) Baab al-Iman", "B) Ar-Rayyan", "C) Baab al-Islam", "D) Baab as-Salah"], a: "B) Ar-Rayyan", e: "Ar-Rayyan is a special gate in Paradise through which only those who fasted will enter." },
    { q: "What happens to the devils (Shayatin) in Ramadan?", o: ["A) They hide", "B) They are chained", "C) They repent", "D) They sleep"], a: "B) They are chained", e: "The Prophet (PBUH) said that in Ramadan, the gates of Hell are closed and devils are chained." },
    { q: "What does 'Ramadan' literally mean?", o: ["A) Forgiveness", "B) Intense heat", "C) Full moon", "D) Prayer"], a: "B) Intense heat", e: "It comes from 'ramida,' meaning heat, symbolizing the burning away of sins." },

    // 11-20: Historical Events
    { q: "In which year AH was fasting made obligatory?", o: ["A) 1 AH", "B) 2 AH", "C) 5 AH", "D) 10 AH"], a: "B) 2 AH", e: "Fasting was made Fard in the second year after the Hijrah to Madinah." },
    { q: "The Battle of Badr occurred on which Ramadan date?", o: ["A) 1st", "B) 10th", "C) 17th", "D) 27th"], a: "C) 17th", e: "The first major battle in Islam, Badr, took place on the 17th of Ramadan, 2 AH." },
    { q: "Who was the Prophet's wife that passed away in Ramadan?", o: ["A) Aisha (RA)", "B) Khadija (RA)", "C) Sawda (RA)", "D) Hafsa (RA)"], a: "B) Khadija (RA)", e: "Khadija bint Khuwaylid passed away in the 'Year of Sorrow' during Ramadan." },
    { q: "The Conquest of Makkah took place in which month?", o: ["A) Ramadan", "B) Shawwal", "C) Rajab", "D) Muharram"], a: "A) Ramadan", e: "Makkah was liberated by the Prophet (PBUH) in Ramadan, 8 AH." },
    { q: "Which Prophet received the Psalms (Zabur) in Ramadan?", o: ["A) Musa", "B) Dawood", "C) Ibrahim", "D) Isa"], a: "B) Dawood", e: "Hadith traditions mention that the Zabur was revealed to Dawood (AS) on the 12th or 18th of Ramadan." },
    { q: "The revelation of the Suhuf (Scrolls) of Ibrahim happened on:", o: ["A) 1st Ramadan", "B) 10th Ramadan", "C) 15th Ramadan", "D) 30th Ramadan"], a: "A) 1st Ramadan", e: "According to Hadith, Ibrahim (AS) received his scrolls on the first night of Ramadan." },
    { q: "Imam Ali (RA) was martyred in which month?", o: ["A) Muharram", "B) Ramadan", "C) Safar", "D) Shawwal"], a: "B) Ramadan", e: "Ali ibn Abi Talib was martyred on the 21st of Ramadan, 40 AH." },
    { q: "Which grandson of the Prophet (PBUH) was born in Ramadan?", o: ["A) Hasan (RA)", "B) Husayn (RA)", "C) Muhsin", "D) Zain"], a: "A) Hasan (RA)", e: "Hasan ibn Ali (RA) was born on the 15th of Ramadan, 3 AH." },
    { q: "In which month did the Angel Jibril review the Quran with the Prophet?", o: ["A) Every month", "B) Ramadan", "C) Dhul Hijjah", "D) Rabi al-Awwal"], a: "B) Ramadan", e: "Jibril (AS) would meet the Prophet (PBUH) every night in Ramadan to review the Quran." },
    { q: "When was the library of 'Bayt al-Hikmah' famously active?", o: ["A) Ramadan", "B) Abbasid Era", "C) Umayyad Era", "D) Ottoman Era"], a: "B) Abbasid Era", e: "While active year-round, Islamic scholarship peak often aligned with the spirituality of Ramadan." },

    // 21-30: Fiqh (Rules)
    { q: "What is the ruling on brushing teeth while fasting?", o: ["A) Forbidden", "B) Permissible (if no paste swallowed)", "C) Breaks the fast", "D) Only after Iftar"], a: "B) Permissible (if no paste swallowed)", e: "Brushing is allowed, but scholars suggest being careful or using Miswak to avoid swallowing water." },
    { q: "Does unintentional vomiting break the fast?", o: ["A) Yes", "B) No", "C) Only if it's a lot", "D) Yes, requires Kaffarah"], a: "B) No", e: "If vomiting is accidental, the fast remains valid. If intentional, it must be made up." },
    { q: "Who is eligible for Fidya?", o: ["A) A traveler", "B) A permanently ill person", "C) A child", "D) A rich person"], a: "B) A permanently ill person", e: "Those who cannot fast due to old age or chronic illness pay Fidya (feeding the poor)." },
    { q: "What is Kaffarah?", o: ["A) A small gift", "B) Penalty for intentionally breaking a fast", "C) A night prayer", "D) A type of food"], a: "B) Penalty for intentionally breaking a fast", e: "Kaffarah involves fasting for 60 consecutive days or feeding 60 poor people." },
    { q: "What breaks the fast intentionally?", o: ["A) Swallowing saliva", "B) Using perfume", "C) Smoking", "D) Dreaming"], a: "C) Smoking", e: "Smoking involves inhaling particles into the lungs, which invalidates the fast." },
    { q: "Is a traveler required to fast?", o: ["A) Yes, always", "B) No, it's optional", "C) Only if they want", "D) Yes, if the trip is short"], a: "B) No, it's optional", e: "Travelers are permitted to break their fast and make it up later (Quran 2:184)." },
    { q: "At what age should children start training for fasts?", o: ["A) Birth", "B) Puberty", "C) 5 years old", "D) 2 years old"], a: "B) Puberty", e: "Fasting becomes obligatory at puberty, though children are encouraged to practice earlier." },
    { q: "What is the ruling on using an inhaler for asthma?", o: ["A) Breaks fast", "B) Does not break fast (majority view)", "C) Forbidden", "D) Requires Kaffarah"], a: "B) Does not break fast (majority view)", e: "Many modern scholars permit inhalers as they are a medical necessity and go to the lungs, not stomach." },
    { q: "If you eat by mistake (forgetting you are fasting), what should you do?", o: ["A) Stop and continue fast", "B) Start again tomorrow", "C) Pay Fidya", "D) Feed 60 people"], a: "A) Stop and continue fast", e: "The Prophet (PBUH) said: 'Allah has fed you and given you drink' if you eat forgetfully." },
    { q: "What is the ruling on swimming while fasting?", o: ["A) Haram", "B) Permissible (if no water swallowed)", "C) Breaks fast", "D) Makruh"], a: "B) Permissible (if no water swallowed)", e: "Swimming is allowed as long as water does not enter the throat or nose into the stomach." },

    // 31-40: Laylatul Qadr (Night of Power)
    { q: "Laylatul Qadr is better than how many months?", o: ["A) 10", "B) 100", "C) 1,000", "D) 10,000"], a: "C) 1,000", e: "Quran Surah Al-Qadr states this night is better than 83 years (1,000 months) of worship." },
    { q: "In which part of Ramadan is Laylatul Qadr sought?", o: ["A) First 10 days", "B) Middle 10 days", "C) Last 10 days", "D) Only the 27th"], a: "C) Last 10 days", e: "The Prophet (PBUH) told us to seek it in the odd nights of the last ten days." },
    { q: "Which Dua did the Prophet teach Aisha (RA) for this night?", o: ["A) Allahumma Barik", "B) Allahumma innaka afuwwun", "C) Subhanallah", "D) Alhamdulillah"], a: "B) Allahumma innaka afuwwun", e: "The Dua means: 'O Allah, You are Forgiving, You love forgiveness, so forgive me'." },
    { q: "What descended on Laylatul Qadr?", o: ["A) Rain", "B) The Quran", "C) Wealth", "D) A new mountain"], a: "B) The Quran", e: "The Quran was sent down from the Preserved Tablet (Lauh al-Mahfuz) to the lower heaven on this night." },
    { q: "Who descends with the angels on Laylatul Qadr?", o: ["A) Jibril (AS)", "B) Mikaeel (AS)", "C) Israfil (AS)", "D) Izraeel (AS)"], a: "A) Jibril (AS)", e: "The Quran mentions 'The Spirit' (Jibril) and the angels descend by Allah's permission." },
    { q: "What is a sign of Laylatul Qadr according to Hadith?", o: ["A) It rains blood", "B) The sun rises without rays", "C) Dogs don't bark", "D) Trees bow down"], a: "B) The sun rises without rays", e: "A Sahih sign is that the sun rises the next morning looking weak and white, without intense rays." },
    { q: "What is the 'odd nights' list?", o: ["A) 20, 22, 24", "B) 21, 23, 25, 27, 29", "C) 1, 3, 5", "D) 2, 4, 6"], a: "B) 21, 23, 25, 27, 29", e: "These are the nights calculated based on the lunar calendar to find the Night of Power." },
    { q: "Does sleeping through Laylatul Qadr break the fast?", o: ["A) Yes", "B) No", "C) Only if you dream", "D) It breaks the prayer"], a: "B) No", e: "Sleeping does not break the fast, but one loses out on the immense rewards of that night." },
    { q: "Is Laylatul Qadr always on the 27th?", o: ["A) Yes", "B) No, it moves", "C) Only in Makkah", "D) Only on Fridays"], a: "B) No, it moves", e: "While many focus on the 27th, it can be any of the odd nights in the last ten days." },
    { q: "What is the reward for praying on Laylatul Qadr?", o: ["A) A house in Jannah", "B) Sins forgiven", "C) 100 camels", "D) Long life"], a: "B) Sins forgiven", e: "The Prophet (PBUH) said whoever prays with faith and hope will have previous sins forgiven." },

    // 41-50: Taraweeh and Night Prayers
    { q: "Is Taraweeh prayer Fard (obligatory)?", o: ["A) Yes", "B) No, it's Sunnah Mu'akkadah", "C) It's optional only for men", "D) No, it's Makruh"], a: "B) No, it's Sunnah Mu'akkadah", e: "It is a highly recommended Sunnah that the Prophet (PBUH) and Sahaba practiced." },
    { q: "What does 'Taraweeh' literally mean?", o: ["A) To pray", "B) To rest", "C) To stand", "D) To read"], a: "B) To rest", e: "It comes from the root word for 'rest', as the Sahaba used to rest after every four Rakahs." },
    { q: "Who unified the Sahaba to pray Taraweeh behind one Imam?", o: ["A) Abu Bakr (RA)", "B) Umar (RA)", "C) Uthman (RA)", "D) Ali (RA)"], a: "B) Umar (RA)", e: "Umar ibn al-Khattab (RA) organized the community to pray behind Ubayy ibn Ka'b." },
    { q: "How many Rakahs did the Prophet (PBUH) usually pray for Tahajjud/Taraweeh?", o: ["A) 2", "B) 4", "C) 8 or 11", "D) 20"], a: "C) 8 or 11", e: "Aisha (RA) narrated the Prophet did not exceed 11 Rakahs (including Witr) in or out of Ramadan." },
    { q: "What is 'Qiyam-ul-Layl'?", o: ["A) The morning prayer", "B) Standing in night prayer", "C) Breaking the fast", "D) Reading a book"], a: "B) Standing in night prayer", e: "It refers to the general act of night worship, which includes Taraweeh and Tahajjud." },
    { q: "Can women pray Taraweeh at home?", o: ["A) No", "B) Yes, and it is rewarding", "C) Only if they are old", "D) Only on Fridays"], a: "B) Yes, and it is rewarding", e: "Women can pray Taraweeh in congregation at the Masjid or individually at home." },
    { q: "Is it required to finish the whole Quran in Taraweeh?", o: ["A) Yes", "B) No, but it is Sunnah", "C) Only for the Imam", "D) Only in Makkah"], a: "B) No, but it is Sunnah", e: "Finishing the Quran is a beautiful tradition to hear the whole Word of Allah, but not a strict requirement." },
    { q: "What is the Witr prayer?", o: ["A) The first prayer", "B) An odd-numbered prayer to end the night", "C) The dawn prayer", "D) A prayer for rain"], a: "B) An odd-numbered prayer to end the night", e: "The Prophet (PBUH) said: 'Make the last of your prayer at night Witr'." },
    { q: "Can you pray Taraweeh alone?", o: ["A) No", "B) Yes", "C) Only if the Masjid is closed", "D) Only if you are sick"], a: "B) Yes", e: "Taraweeh can be prayed individually, though congregation (Jama'at) has more reward." },
    { q: "When is the best time for Tahajjud?", o: ["A) Before Isha", "B) After Maghrib", "C) Last third of the night", "D) Noon"], a: "C) Last third of the night", e: "Allah descends to the lowest heaven in the last third of the night to answer those who call Him." },

    // 51-150: (Continuing the pattern for 100 more questions)
    // 51-60: I'tikaf (Seclusion)
    { q: "What is I'tikaf?", o: ["A) Charity", "B) Staying in the Masjid for worship", "C) A type of fast", "D) A pilgrimage"], a: "B) Staying in the Masjid for worship", e: "I'tikaf is usually performed in the last 10 days of Ramadan to focus purely on Allah." },
    { q: "What is the minimum duration for Sunnah I'tikaf?", o: ["A) 1 hour", "B) 1 day", "C) Last 10 days", "D) 30 days"], a: "C) Last 10 days", e: "The Sunnah of the Prophet (PBUH) was to perform it for the final ten days of the month." },
    { q: "Can someone in I'tikaf leave the Masjid for no reason?", o: ["A) Yes", "B) No, it breaks I'tikaf", "C) Only for shopping", "D) Only at night"], a: "B) No, it breaks I'tikaf", e: "Leaving the Masjid without a valid necessity (like using the bathroom) invalidates the I'tikaf." },
    { q: "Who performed I'tikaf after the Prophet's (PBUH) death?", o: ["A) His wives", "B) No one", "C) Only the Caliphs", "D) Only children"], a: "A) His wives", e: "The wives of the Prophet (PBUH) continued the tradition of I'tikaf after his passing." },
    { q: "What should one focus on during I'tikaf?", o: ["A) Business", "B) Quran and Dhikr", "C) Sleeping", "D) Chatting"], a: "B) Quran and Dhikr", e: "The purpose is to cut off from worldly distractions and build a connection with Allah." },
    { q: "Is fasting a condition for Sunnah I'tikaf?", o: ["A) No", "B) Yes", "C) Only for men", "D) Only on Fridays"], a: "B) Yes", e: "According to most scholars, since it is a Ramadan Sunnah, the person must be fasting." },
    { q: "Where can men perform I'tikaf?", o: ["A) At home", "B) In a Masjid where Jama'at is held", "C) In a garden", "D) In a school"], a: "B) In a Masjid where Jama'at is held", e: "It must be a mosque where regular prayers are established." },
    { q: "What is 'I'tikaf al-Nadr'?", o: ["A) Sunnah", "B) Vowed I'tikaf (Wajib)", "C) Optional", "D) Forbidden"], a: "B) Vowed I'tikaf (Wajib)", e: "If someone vows to Allah they will do I'tikaf if a wish is granted, it becomes obligatory." },
    { q: "Does arguing break I'tikaf?", o: ["A) No, but it reduces reward", "B) Yes, immediately", "C) Only if it's about money", "D) Only if it's loud"], a: "A) No, but it reduces reward", e: "While it doesn't technically break it, the person should avoid all bad speech." },
    { q: "What is the best night to end I'tikaf?", o: ["A) 25th", "B) After the Eid moon is sighted", "C) 15th", "D) 1st of Shawwal morning"], a: "B) After the Eid moon is sighted", e: "One stays until the sunset of the last day of Ramadan when the moon of Shawwal is confirmed." },

    // 61-70: Zakat al-Fitr (Charity)
    { q: "Who must pay Zakat al-Fitr?", o: ["A) Only the rich", "B) Every Muslim who has enough food", "C) Only the Imam", "D) Only travelers"], a: "B) Every Muslim who has enough food", e: "It is mandatory for every family member, including children and infants." },
    { q: "When is the deadline to pay Zakat al-Fitr?", o: ["A) Before Ramadan ends", "B) Before the Eid prayer", "C) After Eid prayer", "D) 10 days after Eid"], a: "B) Before the Eid prayer", e: "If paid after the Eid prayer, it is considered regular Sadaqah, not Zakat al-Fitr." },
    { q: "What is the main purpose of Zakat al-Fitr?", o: ["A) To build Masjids", "B) To purify the fast and feed the poor", "C) To buy Eid clothes", "D) To pay the Imam"], a: "B) To purify the fast and feed the poor", e: "It compensates for mistakes made during fasting and ensures the poor can celebrate Eid." },
    { q: "How much is one 'Sa'a' (the traditional measure)?", o: ["A) 1 kg", "B) Approx 2.5 to 3 kg", "C) 10 kg", "D) 500 grams"], a: "B) Approx 2.5 to 3 kg", e: "It is roughly four handfuls of a staple food like dates, barley, or rice." },
    { q: "Can you give Zakat al-Fitr in cash?", o: ["A) No, only food", "B) Yes (majority modern view)", "C) Only to family", "D) Only in Ramadan"], a: "B) Yes (majority modern view)", e: "While food is traditional, many scholars allow cash so the poor can buy what they need most." },
    { q: "Who is the head of the household responsible for?", o: ["A) Just himself", "B) Himself and his dependents", "C) The neighbors", "D) No one"], a: "B) Himself and his dependents", e: "The father/head pays for his wife, children, and any other dependents." },
    { q: "Can Zakat al-Fitr be given to non-Muslims?", o: ["A) Yes", "B) No, it is for poor Muslims", "C) Only if they are friends", "D) Only on Eid"], a: "B) No, it is for poor Muslims", e: "Zakat is specifically for the poor of the Muslim community." },
    { q: "What is 'Sadaqah al-Fitr'?", o: ["A) Another name for Zakat al-Fitr", "B) A different tax", "C) Optional charity", "D) A prayer"], a: "A) Another name for Zakat al-Fitr", e: "Both terms refer to the mandatory charity given at the end of Ramadan." },
    { q: "Can you pay Zakat al-Fitr at the start of Ramadan?", o: ["A) No", "B) Yes, some scholars allow it", "C) Only on the 1st", "D) Only on the 30th"], a: "B) Yes, some scholars allow it", e: "While the last few days are best, many schools allow early payment to ensure it reaches the poor in time." },
    { q: "Is Zakat al-Fitr the same as Zakat al-Maal?", o: ["A) Yes", "B) No, Fitr is per head, Maal is on wealth", "C) Yes, both are 2.5%", "D) No, Fitr is optional"], a: "B) No, Fitr is per head, Maal is on wealth", e: "Zakat al-Fitr is a small fixed amount for everyone; Zakat al-Maal depends on your savings." },

    // 71-80: Virtues and Rewards
    { q: "Fasting 6 days in Shawwal plus Ramadan is like fasting for:", o: ["A) 2 months", "B) 6 months", "C) A whole year", "D) A lifetime"], a: "C) A whole year", e: "The Prophet (PBUH) said this combination equals the reward of a perpetual fast." },
    { q: "What are the three stages (Ashras) of Ramadan?", o: ["A) Rain, Sun, Moon", "B) Mercy, Forgiveness, Protection from Fire", "C) Fasting, Praying, Eating", "D) Beginning, Middle, End"], a: "B) Mercy, Forgiveness, Protection from Fire", e: "Tradition divides the 30 days into three segments of spiritual focus." },
    { q: "What is the 'breath' of a fasting person compared to?", o: ["A) Flowers", "B) Musk", "C) Honey", "D) Rain"], a: "B) Musk", e: "The Prophet (PBUH) said the smell of the mouth of a fasting person is better to Allah than musk." },
    { q: "How many times is the reward of good deeds multiplied in Ramadan?", o: ["A) 2 times", "B) 10 to 700 times or more", "C) 5 times", "D) No extra reward"], a: "B) 10 to 700 times or more", e: "Every good deed is multiplied, and for fasting, Allah says: 'It is for Me and I will reward it'." },
    { q: "What did the Prophet (PBUH) say about Umrah in Ramadan?", o: ["A) It's forbidden", "B) It's like Hajj with him", "C) It's a waste of time", "D) It's only for the rich"], a: "B) It's like Hajj with him", e: "An Umrah performed in Ramadan carries the reward equivalent to Hajj." },
    { q: "What is the 'Iftar of a Fasting Person' reward?", o: ["A) You get half their reward", "B) You get the same reward as them", "C) You get money", "D) No reward"], a: "B) You get the same reward as them", e: "Whoever feeds a fasting person gets the same reward as the one who fasted, without decreasing their reward." },
    { q: "When are Duas most accepted in Ramadan?", o: ["A) While sleeping", "B) At the time of Iftar", "C) During lunch", "D) After Eid"], a: "B) At the time of Iftar", e: "The Prophet (PBUH) mentioned the Dua of a fasting person at the moment of Iftar is not rejected." },
    { q: "What is the reward for praying Sunnah prayers in Ramadan?", o: ["A) Like a Sunnah", "B) Like a Fard (Obligatory) prayer", "C) No reward", "D) Like 2 Sunnahs"], a: "B) Like a Fard (Obligatory) prayer", e: "A narration states that doing a voluntary act in Ramadan is like doing an obligatory one at other times." },
    { q: "Which Sahabi was known as the most generous in Ramadan?", o: ["A) Abu Bakr (RA)", "B) The Prophet (PBUH) himself", "C) Umar (RA)", "D) Uthman (RA)"], a: "B) The Prophet (PBUH) himself", e: "He was described as being more generous than a 'blowing wind' during this month." },
    { q: "What is the best thing to read in Ramadan?", o: ["A) History", "B) Poetry", "C) The Quran", "D) News"], a: "C) The Quran", e: "Ramadan is the month of the Quran; reading and reflecting on it is the best worship." },

    // 81-90: Sunnah and Etiquette
    { q: "Is it Sunnah to delay Suhoor?", o: ["A) No, eat early", "B) Yes, eat close to Fajr", "C) Eat at midnight", "D) Don't eat Suhoor"], a: "B) Yes, eat close to Fajr", e: "The Prophet (PBUH) recommended delaying Suhoor until shortly before the dawn prayer." },
    { q: "Is it Sunnah to hasten Iftar?", o: ["A) Yes, break it immediately", "B) No, wait 10 minutes", "C) Wait until dark", "D) Wait for the moon"], a: "A) Yes, break it immediately", e: "The Prophet (PBUH) said people will be on the right path as long as they hasten to break the fast." },
    { q: "What should you say if someone insults you while you fast?", o: ["A) Insult them back", "B) 'I am fasting, I am fasting'", "C) Cry", "D) Walk away and stay angry"], a: "B) 'I am fasting, I am fasting'", e: "The Prophet (PBUH) taught us to maintain peace and respond with 'Inni sa'im'." },
    { q: "What is the best way to break the fast?", o: ["A) With meat", "B) With fresh dates or water", "C) With juice", "D) With bread"], a: "B) With fresh dates or water", e: "The Prophet (PBUH) broke his fast with fresh dates, or dry dates, or sips of water." },
    { q: "Should you overeat at Iftar?", o: ["A) Yes, you were hungry", "B) No, it's against the spirit", "C) Only on Fridays", "D) Only if the food is free"], a: "B) No, it's against the spirit", e: "Moderation is key; overeating makes one lazy for the evening prayers (Taraweeh)." },
    { q: "What is the 'Suhur barakah'?", o: ["A) A type of bread", "B) The blessing in the pre-dawn meal", "C) A specific Dua", "D) A name of a Masjid"], a: "B) The blessing in the pre-dawn meal", e: "The Prophet (PBUH) said: 'Take Suhur, for in Suhur there is Barakah (blessing)'." },
    { q: "What should you avoid most while fasting?", o: ["A) Sleeping", "B) Bad speech and lies", "C) Water", "D) Looking at clocks"], a: "B) Bad speech and lies", e: "The Prophet (PBUH) said Allah does not need one to stay hungry if they don't give up false speech." },
    { q: "Is it Sunnah to be extra generous in Ramadan?", o: ["A) No, save money", "B) Yes", "C) Only to family", "D) Only on the 27th"], a: "B) Yes", e: "Generosity and giving Sadaqah are highly encouraged during this holy month." },
    { q: "What is the 'Miswak'?", o: ["A) A prayer mat", "B) A natural tooth-stick", "C) A type of hat", "D) A special soup"], a: "B) A natural tooth-stick", e: "Using the Miswak is a Sunnah that helps keep the mouth clean while fasting." },
    { q: "What is 'Dhikr'?", o: ["A) Eating", "B) Remembering Allah", "C) Traveling", "D) A city"], a: "B) Remembering Allah", e: "Constantly remembering Allah through phrases like Subhanallah and Alhamdulillah is highly rewarding." },

    // 91-100: Eid al-Fitr
    { q: "What is the first day of Shawwal called?", o: ["A) Ramadan", "B) Eid al-Fitr", "C) Eid al-Adha", "D) Ashura"], a: "B) Eid al-Fitr", e: "It is the 'Festival of Breaking the Fast', celebrated after Ramadan ends." },
    { q: "How many Takbirs are in the first Rakah of Eid prayer (usually)?", o: ["A) 1", "B) 3", "C) 7", "D) 12"], a: "C) 7", e: "In the Hanafi school it is 3 extra, in others (like Shafi'i) it is 7 in the first and 5 in the second." },
    { q: "Is the Eid Khutbah (sermon) before or after the prayer?", o: ["A) Before", "B) After", "C) During", "D) No sermon"], a: "B) After", e: "Unlike Jumu'ah (Friday prayer), the Eid sermon is delivered after the prayer is completed." },
    { q: "What is the Sunnah act before going to the Eid al-Fitr prayer?", o: ["A) Eating an odd number of dates", "B) Fasting", "C) Sleeping until noon", "D) Not washing"], a: "A) Eating an odd number of dates", e: "It shows that the month of fasting is truly over and you are obeying Allah by not fasting." },
    { q: "What is the 'Ghusl' of Eid?", o: ["A) A meal", "B) Ritual bath", "C) A prayer", "D) A gift"], a: "B) Ritual bath", e: "It is Sunnah to perform Ghusl (complete bath) before attending the Eid prayer." },
    { q: "Should you take a different route back from the Eid prayer?", o: ["A) No", "B) Yes, it's Sunnah", "C) Only if there is traffic", "D) Only if you are walking"], a: "B) Yes, it's Sunnah", e: "The Prophet (PBUH) would go by one path and return by another to spread the greetings." },
    { q: "Is Eid prayer held in a Masjid or an open field (Musalla)?", o: ["A) Only Masjid", "B) Open field is Sunnah", "C) At home only", "D) In a mall"], a: "B) Open field is Sunnah", e: "The Prophet (PBUH) usually prayed the Eid prayer in an open area called the Musalla." },
    { q: "What is the Takbir recited on the way to Eid?", o: ["A) Allahu Akbar...", "B) Subhanallah...", "C) Alhamdulillah...", "D) Astaghfirullah..."], a: "A) Allahu Akbar...", e: "Reciting 'Allahu Akbar, Allahu Akbar, La ilaha illallah...' is a hallmark of Eid morning." },
    { q: "Can you fast on the day of Eid?", o: ["A) Yes", "B) No, it is forbidden", "C) Only until noon", "D) Only if you missed Ramadan"], a: "B) No, it is forbidden", e: "It is haram to fast on the day of Eid al-Fitr and Eid al-Adha." },
    { q: "What is the 'Eid greeting' used by the Sahaba?", o: ["A) Happy Eid", "B) Taqabbalallahu minna wa minkum", "C) Good luck", "D) See you next year"], a: "B) Taqabbalallahu minna wa minkum", e: "It means 'May Allah accept [good deeds] from us and from you'." },

    // 101-110: Health and Science of Fasting
    { q: "What is 'Autophagy' (a benefit of fasting)?", o: ["A) Feeling hungry", "B) Body cleaning out damaged cells", "C) Sleeping too much", "D) Growing hair"], a: "B) Body cleaning out damaged cells", e: "Fasting triggers a process where the body recycles old and damaged cell components." },
    { q: "Is fasting good for heart health?", o: ["A) No", "B) Yes, it can lower blood pressure", "C) It's dangerous", "D) Only for athletes"], a: "B) Yes, it can lower blood pressure", e: "Studies show fasting can improve cholesterol levels and heart health." },
    { q: "Which organ gets a 'rest' during fasting?", o: ["A) The brain", "B) The digestive system", "C) The lungs", "D) The skin"], a: "B) The digestive system", e: "Fasting allows the stomach and intestines to take a break from constant processing." },
    { q: "Does fasting help with insulin resistance?", o: ["A) No", "B) Yes, it can help lower blood sugar", "C) It makes it worse", "D) No effect"], a: "B) Yes, it can help lower blood sugar", e: "Fasting helps the body become more sensitive to insulin." },
    { q: "What should you drink lots of after Iftar?", o: ["A) Soda", "B) Water", "C) Coffee", "D) Milkshakes"], a: "B) Water", e: "Rehydrating with water is essential for health during the non-fasting hours." },
    { q: "What is a 'sugar crash' at Iftar?", o: ["A) Eating too much fruit", "B) Eating too many sweets quickly", "C) Not eating enough", "D) Drinking water"], a: "B) Eating too many sweets quickly", e: "Rapid intake of sugar after a fast can cause a spike and then a sudden drop in energy." },
    { q: "Does fasting improve brain function?", o: ["A) No", "B) Yes, via BDNF protein", "C) It makes you forgetful", "D) Only for kids"], a: "B) Yes, via BDNF protein", e: "Fasting can boost brain-derived neurotrophic factor, which is good for brain health." },
    { q: "Is 'dry fasting' (no water) used in Ramadan?", o: ["A) Yes", "B) No", "C) Only in summer", "D) Only in winter"], a: "A) Yes", e: "Unlike intermittent fasting where water is allowed, Islamic fasting is a dry fast from dawn to sunset." },
    { q: "What is the best way to avoid thirst?", o: ["A) Eat salty food", "B) Avoid salt and caffeine at Suhoor", "C) Drink soda", "D) Sleep"], a: "B) Avoid salt and caffeine at Suhoor", e: "Salty foods and caffeine make the body lose water faster." },
    { q: "Should you exercise while fasting?", o: ["A) Never", "B) Yes, light exercise is fine", "C) Only heavy lifting", "D) Only at night"], a: "B) Yes, light exercise is fine", e: "Light walking or stretching is healthy, but avoid intense workouts while dehydrated." },

    // 111-120: Ethics and Character
    { q: "What is the 'inner' fast?", o: ["A) Not eating", "B) Keeping the heart free from sin", "C) Drinking water in secret", "D) Sleeping"], a: "B) Keeping the heart free from sin", e: "True fasting involves the eyes, ears, and heart abstaining from what Allah dislikes." },
    { q: "Does backbiting (Gheebah) affect the fast?", o: ["A) No", "B) It ruins the reward", "C) It makes you hungry", "D) It breaks the fast technically"], a: "B) It ruins the reward", e: "While it doesn't break the fast, it destroys the spiritual benefit and merit." },
    { q: "How should a fasting person handle anger?", o: ["A) Shout loudly", "B) Stay calm and say 'I am fasting'", "C) Ignore everyone", "D) Eat to feel better"], a: "B) Stay calm and say 'I am fasting'", e: "Fasting is a shield; it should teach us self-control and patience." },
    { q: "Is it better to give charity secretly or publicly?", o: ["A) Publicly", "B) Secretly is generally better", "C) Not at all", "D) Only to friends"], a: "B) Secretly is generally better", e: "Secret charity protects the dignity of the receiver and the sincerity of the giver." },
    { q: "What is 'Riya'?", o: ["A) A name", "B) Showing off worship", "C) A city", "D) A type of fast"], a: "B) Showing off worship", e: "Fasting is one of the best ways to avoid Riya because no one knows you are fasting except Allah." },
    { q: "What is 'Husn al-Khuluq'?", o: ["A) Bad manners", "B) Good character", "C) Fasting", "D) Traveling"], a: "B) Good character", e: "The Prophet (PBUH) said nothing is heavier on the scale than good character." },
    { q: "Should we waste food at Iftar?", o: ["A) Yes, it's a party", "B) No, extravagance is forbidden", "C) Only if we are rich", "D) Only on Eid"], a: "B) No, extravagance is forbidden", e: "The Quran says 'Eat and drink but do not be wasteful'." },
    { q: "What is the benefit of communal Iftar?", o: ["A) Free food", "B) Unity and brotherhood", "C) No cleaning", "D) Loud talking"], a: "B) Unity and brotherhood", e: "Sharing meals brings the community together and strengthens ties of faith." },
    { q: "Is it okay to work while fasting?", o: ["A) No, just sleep", "B) Yes, one should be productive", "C) Only for 1 hour", "D) Only in the office"], a: "B) Yes, one should be productive", e: "The Sahaba did great works and even fought battles while fasting; it's not a month of laziness." },
    { q: "What is the 'Month of Patience'?", o: ["A) Shawwal", "B) Ramadan", "C) Muharram", "D) Rajab"], a: "B) Ramadan", e: "Ramadan is often called the Month of Patience because it requires Sabr (patience) throughout." },

    // 121-130: Miscellaneous Knowledge
    { q: "What is 'Ashura'?", o: ["A) 1st of Ramadan", "B) 10th of Muharram", "C) Day of Eid", "D) Last night"], a: "B) 10th of Muharram", e: "It is a day of fasting based on the practice of Musa (AS) and our Prophet (PBUH)." },
    { q: "Is fasting on Monday and Thursday Sunnah?", o: ["A) No", "B) Yes, outside Ramadan", "C) Only in Ramadan", "D) Only for seniors"], a: "B) Yes, outside Ramadan", e: "The Prophet (PBUH) used to fast these days because deeds are presented to Allah then." },
    { q: "What are the 'White Days' (Ayyam al-Beed)?", o: ["A) Fridays", "B) 13, 14, 15 of every lunar month", "C) Snow days", "D) First days of year"], a: "B) 13, 14, 15 of every lunar month", e: "It is Sunnah to fast these three days when the moon is full." },
    { q: "What is 'Sawm Dawud'?", o: ["A) Fasting every day", "B) Fasting every other day", "C) Fasting once a year", "D) Fasting once a week"], a: "B) Fasting every other day", e: "The Prophet (PBUH) called it the most beloved fast to Allah." },
    { q: "Can you fast for someone who passed away?", o: ["A) No", "B) Yes, to make up their missed obligatory fasts", "C) Only on Eid", "D) Only in Makkah"], a: "B) Yes, to make up their missed obligatory fasts", e: "If a person had missed fasts, their heir can fast on their behalf (Hadith)." },
    { q: "What is the 'Dua for breaking fast'?", o: ["A) Bismillah", "B) Dhahaba al-zam'u...", "C) Alhamdulillah", "D) Subhanallah"], a: "B) Dhahaba al-zam'u...", e: "It means 'Thirst has gone, the veins are moistened, and the reward is certain, if Allah wills'." },
    { q: "What is the 'month of the Quran'?", o: ["A) Rajab", "B) Ramadan", "C) Shawwal", "D) Safar"], a: "B) Ramadan", e: "Allah mentions this specifically in the Quran as the month in which the Book was sent." },
    { q: "How many times should we read the Quran in Ramadan?", o: ["A) 0", "B) At least once is encouraged", "C) 100", "D) 10"], a: "B) At least once is encouraged", e: "Many people finish one 'Khatam' during the 30 days of the month." },
    { q: "Is it okay to sleep all day while fasting?", o: ["A) Yes, it's better", "B) No, one should stay active in worship", "C) Only if you are tired", "D) Only on weekends"], a: "B) No, one should stay active in worship", e: "While sleeping is not haram, wasting the time of Ramadan in excessive sleep is discouraged." },
    { q: "What is 'Taqwa'?", o: ["A) Fear of heights", "B) Consciousness and love of Allah", "C) Hunger", "D) A type of date"], a: "B) Consciousness and love of Allah", e: "It is the protective shield that prevents us from falling into sin." },

    // 131-140: Global Traditions
    { q: "What is the 'Cannon' tradition (Midfa al-Iftar)?", o: ["A) A game", "B) Using a cannon to signal Iftar", "C) A prayer", "D) A type of food"], a: "B) Using a cannon to signal Iftar", e: "Many Muslim countries use a cannon blast to announce the time to break the fast." },
    { q: "What are 'Fanous'?", o: ["A) Dates", "B) Colorful lanterns", "C) Prayer beads", "D) Shoes"], a: "B) Colorful lanterns", e: "Especially in Egypt, lanterns are a famous symbol of Ramadan decorations." },
    { q: "What is a 'Musaharati'?", o: ["A) A cook", "B) A person who wakes people for Suhoor with a drum", "C) An Imam", "D) A traveler"], a: "B) A person who wakes people for Suhoor with a drum", e: "In traditional neighborhoods, this person walks around to ensure everyone eats their pre-dawn meal." },
    { q: "What is 'Gerga'oon' / 'Qarqe'an'?", o: ["A) A battle", "B) A mid-Ramadan celebration for children", "C) A type of soup", "D) A night prayer"], a: "B) A mid-Ramadan celebration for children", e: "In some Gulf countries, children dress up and collect candy on the 15th night." },
    { q: "Which country has the longest fast in the world (usually)?", o: ["A) Saudi Arabia", "B) Countries near the North Pole (e.g. Iceland/Norway)", "C) Indonesia", "D) Brazil"], a: "B) Countries near the North Pole (e.g. Iceland/Norway)", e: "Due to long summer days, fasts in northern countries can reach 20+ hours." },
    { q: "How do Muslims near the poles fast if the sun doesn't set?", o: ["A) They don't fast", "B) They follow Makkah or the nearest city", "C) They fast for 24 hours", "D) They fast at night only"], a: "B) They follow Makkah or the nearest city", e: "Scholars provide fatwas allowing them to follow a reasonable schedule like Makkah's time." },
    { q: "What is 'Haleem'?", o: ["A) A prayer", "B) A popular slow-cooked stew for Iftar", "C) A name of a month", "D) A king"], a: "B) A popular slow-cooked stew for Iftar", e: "A nutritious dish made of wheat, meat, and lentils, common in South Asia." },
    { q: "What is 'Rooh Afza'?", o: ["A) A book", "B) A popular rose-flavored syrup for Iftar drinks", "C) A spiritual state", "D) A town"], a: "B) A popular rose-flavored syrup for Iftar drinks", e: "A classic Ramadan beverage in India, Pakistan, and Bangladesh." },
    { q: "What is 'Knafeh'?", o: ["A) A sweet cheese pastry", "B) A type of bread", "C) A prayer rug", "D) A hat"], a: "A) A sweet cheese pastry", e: "A famous Middle Eastern dessert often served during Ramadan nights." },
    { q: "Are non-Muslims invited to Iftar?", o: ["A) No", "B) Yes, to build bridges and share culture", "C) Only if they fast", "D) Only in secret"], a: "B) Yes, to build bridges and share culture", e: "Many communities hold 'Open Iftars' to welcome neighbors of all faiths." },

    // 141-150: Final Reminders
    { q: "What should we do on the last night of Ramadan?", o: ["A) Stop praying", "B) Ask for acceptance of our fasts", "C) Just watch TV", "D) Forget the month"], a: "B) Ask for acceptance of our fasts", e: "The Sahaba would spend months after Ramadan asking Allah to accept their efforts." },
    { q: "Does the reward of Ramadan end when the month ends?", o: ["A) Yes", "B) No, good deeds continue year-round", "C) Only on Eid", "D) Yes, until next year"], a: "B) No, good deeds continue year-round", e: "A sign of an accepted Ramadan is that a person continues their good habits after it is over." },
    { q: "What is the 'Niyyah' (intention)?", o: ["A) Talking loudly", "B) The heart's resolve to fast for Allah", "C) A specific food", "D) A prayer bead"], a: "B) The heart's resolve to fast for Allah", e: "The intention is necessary for the fast to be valid; it is made in the heart." },
    { q: "When should the Niyyah for a Fard fast be made?", o: ["A) After it's over", "B) Before Fajr", "C) At noon", "D) After Iftar"], a: "B) Before Fajr", e: "For obligatory fasts, the intention must be present before the break of dawn." },
    { q: "What is 'Al-Wida' (The Farewell)?", o: ["A) The start of Ramadan", "B) The last Friday of Ramadan", "C) A type of Iftar", "D) A new moon"], a: "B) The last Friday of Ramadan", e: "In some cultures, the last Jumu'ah is given special focus as a farewell to the month." },
    { q: "Should we feel sad when Ramadan leaves?", o: ["A) No, be happy", "B) Yes, because the mercy and ease leaves", "C) Only if we didn't fast", "D) No, just focus on Eid"], a: "B) Yes, because the mercy and ease leaves", e: "The pious would feel sadness at the departure of the month of extreme blessings." },
    { q: "Is fasting only for Muslims?", o: ["A) Yes", "B) No, it was prescribed for those before us too", "C) Only for people in Makkah", "D) Only for those who are 40+"], a: "B) No, it was prescribed for those before us too", e: "The Quran says: 'as it was prescribed for those before you' (2:183)." },
    { q: "What is the 'Key to Jannah' mentioned with fasting?", o: ["A) Food", "B) Patience", "C) Money", "D) Sleep"], a: "B) Patience", e: "Fasting is half of patience, and patience is a key to Paradise." },
    { q: "How should we spend the time between Asr and Maghrib?", o: ["A) Watching TV", "B) Dua and Dhikr", "C) Sleeping", "D) Complaining about hunger"], a: "B) Dua and Dhikr", e: "This is a very precious time when prayers are often answered before Iftar." },
    { q: "What is the ultimate reward of a successful Ramadan?", o: ["A) A gold medal", "B) Forgiveness of all previous sins", "C) A new car", "D) Fame"], a: "B) Forgiveness of all previous sins", e: "The Prophet (PBUH) promised this to anyone who fasts with sincere faith and hope for reward." } ],
            regular: {
                Quran: [
                    { q: "How many chapters are in the Quran?", o: ["114", "110", "120", "112"], a: "114", e: "The Quran is divided into 114 Surahs." }
                ],
                History: [
                    { q: "Where was the Prophet (PBUH) born?", o: ["Madinah", "Mecca", "Jerusalem", "Taif"], a: "Mecca", e: "The Prophet Muhammad (PBUH) was born in Mecca in the Year of the Elephant." }
                ],
                Sahaba: [
                    { q: "Who was the first Caliph?", o: ["Abu Bakr", "Umar", "Uthman", "Ali"], a: "Abu Bakr", e: "Abu Bakr (RA) was the first of the four Rashidun Caliphs." }
                ],
                Hadith: [
                    { q: "Which book is the most authentic Hadith collection?", o: ["Sahih Bukhari", "Sahih Muslim", "Sunan Nasai", "Al-Muwatta"], a: "Sahih Bukhari", e: "Compiled by Imam Bukhari, it is considered the most reliable collection." }
                ]
            }
        };

        let currentMode = 'ramadan';
        let currentCategory = '';
        let currentLvl = 1;
        let qIdx = 0;
        let score = 0;

        // UI Functions
        function toggleMenu() {
            document.getElementById('sidebar').classList.toggle('open');
            document.getElementById('overlay').style.display = 
                document.getElementById('sidebar').classList.contains('open') ? 'block' : 'none';
        }

        function showScreen(screenId) {
            document.querySelectorAll('.app-card > div').forEach(div => div.classList.add('hidden'));
            document.getElementById(`screen-${screenId}`).classList.remove('hidden');
            if (document.getElementById('sidebar').classList.contains('open')) toggleMenu();
        }

        function toggleTheme() {
            const body = document.body;
            const current = body.getAttribute('data-theme');
            body.setAttribute('data-theme', current === 'dark' ? 'light' : 'dark');
        }

        function switchMode(mode, cat = '') {
            if (mode === 'ramadan') {
                showScreen('ramadan-grid');
                renderRamadanGrid();
            } else if (mode === 'regular' && !cat) {
                showScreen('regular-grid');
            } else if (cat) {
                startQuiz('regular', cat);
            }
        }

        function renderRamadanGrid() {
            const container = document.getElementById('ramadan-grid-container');
            container.innerHTML = '';
            for (let i = 1; i <= 30; i++) {
                const btn = document.createElement('button');
                btn.className = 'lvl';
                btn.innerText = i;
                btn.onclick = () => startQuiz('ramadan', '', i);
                container.appendChild(btn);
            }
        }

        function startQuiz(mode, cat, lvl = 1) {
            currentMode = mode;
            currentCategory = cat;
            currentLvl = lvl;
            qIdx = 0;
            score = 0;
            showScreen('quiz');
            loadQuestion();
        }

        function loadQuestion() {
            const data = currentMode === 'ramadan' ? db.ramadan : db.regular[currentCategory];
            const qData = data[qIdx] || data[0]; // Fallback to avoid errors
            
            document.getElementById('q-meta').innerText = `${currentMode.toUpperCase()} | Q${qIdx + 1}`;
            document.getElementById('q-text').innerText = qData.q;
            
            const container = document.getElementById('opt-container');
            container.innerHTML = '';
            qData.o.forEach(opt => {
                const b = document.createElement('button');
                b.className = 'opt-btn';
                b.innerText = opt;
                b.onclick = () => checkAnswer(opt, qData);
                container.appendChild(b);
            });
        }

        function checkAnswer(selected, qData) {
            const isCorrect = selected === qData.a;
            if (isCorrect) score++;
            
            document.getElementById('m-status').innerText = isCorrect ? "‚úÖ Correct!" : "‚ùå Incorrect";
            document.getElementById('m-ans').innerText = `Answer: ${qData.a}`;
            document.getElementById('m-deep-dive').innerText = qData.e;
            document.getElementById('modal-explain').style.display = 'flex';
        }

        function nextQuestion() {
            document.getElementById('modal-explain').style.display = 'none';
            qIdx++;
            const data = currentMode === 'ramadan' ? db.ramadan : db.regular[currentCategory];
            
            if (qIdx < 5 && qIdx < data.length) {
                loadQuestion();
            } else {
                finishQuiz();
            }
        }

        function finishQuiz() {
            document.getElementById('modal-auth').style.display = 'flex';
        }

        function closeAuthModal() {
            document.getElementById('modal-auth').style.display = 'none';
            showScreen('home');
        }

        function goBackFromQuiz() {
            if (confirm("Quit quiz? Your progress for this level will be lost.")) {
                showScreen('home');
            }
        }

        // Bismillah Start
        document.getElementById('start-trigger').onclick = function() {
            this.style.display = 'none';
            document.getElementById('b-text').style.display = 'block';
            setTimeout(() => {
                document.getElementById('bismillah-overlay').style.opacity = '0';
                setTimeout(() => {
                    document.getElementById('bismillah-overlay').style.display = 'none';
                }, 800);
            }, 3000);
        };

        // Install PWA Logic
        let deferredPrompt;
        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            deferredPrompt = e;
            document.getElementById('install-btn').style.display = 'block';
        });

        document.getElementById('install-btn').onclick = () => {
            deferredPrompt.prompt();
            deferredPrompt.userChoice.then((choice) => {
                if (choice.outcome === 'accepted') document.getElementById('install-btn').style.display = 'none';
            });
        };
    </script>
</body>
</html>

